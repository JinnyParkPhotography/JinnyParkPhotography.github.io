<html>
  <head>
    <title>JinnyParkPhotography</title>
  </head>
  <body>
    <center id="root"></center>
    <script>
      class Component {
        $target;
        state;
        props;
        constructor($target, props) {
          this.$target = $target;
          this.props = props;
          this.setup();
          this.setEvent();
          this.render();
        }
        setup() {}
        setEvent() {}
        setState(newState) {
          this.state = { ...this.state, newState };
          this.render();
        }
        render() {
          this.$target.innerHTML = this.template();
          this.mounted();
        }
        template() { return '';} 
        mounted() {}
      }

      class App extends Component {
        setup() {
          this.state = {
            'nav': 'home', // home, about, gallery contact
          }
        }
        mounted() {
          const { nav } = this.state;
          const { changeNavHandler } = this;

          const $header = document.querySelector('[data-component="header"]');
          new Header($header, { nav, changeNavHandler });
          
          const $footer = document.querySelector('[data-component="footer"]');
          new Footer($footer);

        }
        template() {
          return `
            <header data-component="header"></header>
            <hr/>
            <main>
              <h2>Welcome!! I'm Jinny Park!</h2>
            </main>
            <hr/>
            <footer data-component="footer"></footer>
          `;
        }
        changeNavHandler(nav) {
          this.setState({ nav });
        }
      }

      class Header extends Component {
        template() {
          const { nav } = this.props;
          return `
            <h1><a href="#" data-nav="home">Jinny Park Photography</a></h1>
            <h2>now = ${ nav }</h2>
            <nav>
              <a href="#" data-nav="about">About</a>
              <a href="#" data-nav="gallery">Gallery</a>
              <a href="#" data-nav="contact">Contact</a>
            </nav>
          `;
        }
        setEvent() {
          const { changeNavHandler } = this.props;
          this.$target.addEventListener('click', ({ target }) => {
            const { nav } = target.dataset;
            alert(nav);
            changeNavHandler(nav);
          });
        }
      }

      class Footer extends Component {
        template() {
          return `
            <h3>
              <a href="https://www.instagram.com/jinnypark_photography">
                @jinnypark_photography
              </a>
            </h3>
          `;
        }
      }


      new App(document.querySelector('#root'));
    </script>
  </body>
</html>
